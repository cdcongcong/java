<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>index</title>
<!-- ExtJS核心库及更换主题 -->
<script type="text/javascript"
	src="extjs/application/shared/include-ext.js"></script>
<script type="text/javascript"
	src="extjs/application/shared/options-toolbar.js"></script>


<!-- extjs多语言 -->
<script src="extjs/locale/ext-lang-zh_CN.js"></script>
<script src="extjs/application/locale/application-lang-zh_CN.js"></script>


<!-- index页面样式表 -->
<link rel="stylesheet" type="text/css"
	href="extjs/application/index/index.css" />

<!-- index主页面View -->
<script type="text/javascript"
	src="extjs/application/index/view/Index.js"></script>

<script type="text/javascript">

Ext.Loader.setConfig({
    enabled: true
});

Ext.onReady(function() {
	Ext.Loader.setPath('Application', 'extjs/application');
	var loginForm = Ext.create('Application.index.view.LoginForm');
	

    function loginAction2() {
        Ext.MessageBox.alert("提示",
        "内容");
    };
    
    //loginForm.loginAction() = loginAction2();
  
    Ext.apply(loginForm, {
    	loginAction: function(){
    		
    		Ext.MessageBox.alert("提示",
                    "内容");

            var form = this.up('form');

            if (form.getForm().isValid()) {
//              form.mask();
                form.getForm().submit(
                        {
                            url : 'user/login.json',
                            method : "GET",
                            params : {}, // 传递的参数
                            success : function(form, action) {
                                var responseArray = Ext.JSON
                                        .decode(action.response.responseText);
                                Ext.MessageBox.alert("success",
                                        responseArray.user.userName);
                                form.reset();
//                              this.hide();

                                Ext.create('Application.index.view.Index');
//                              form.unmask();
                            },
                            failure : function(form, action) {
                                var responseArray = Ext.JSON
                                        .decode(action.response.responseText);
                                Ext.MessageBox.alert("failure",
                                        responseArray.user.userName);
                                form.reset();
//                              form.getEl().unmask();

                            }
                        });
            }

            		
    	}
    });
    
    //loginForm.hide();
	
   return;	
});
   

 
 

//	Ext.Loader.setPath('Application', 'extjs/application');

//	Ext.onReady(function() {
//		var index = Ext.create('Application.index.view.Index');
//	});


</script>




<!-- 登录成功转到该用户的portal -->
<!-- 
    <script type="text/javascript" src="extjs/application/shared/examples.js"></script>

    <script type="text/javascript">
        Ext.Loader.setPath('Ext.app', 'extjs/application/portal/classes');
    </script>
   
    <script type="text/javascript" src="extjs/application/portal/portal.js"></script>
    <script type="text/javascript">
        Ext.require([
            'Ext.layout.container.*',
            'Ext.resizer.Splitter',
            'Ext.fx.target.Element',
            'Ext.fx.target.Component',
            'Ext.window.Window',
            'Ext.app.Portlet',
            'Ext.app.PortalColumn',
            'Ext.app.PortalPanel',
            'Ext.app.Portlet',
            'Ext.app.PortalDropZone',
            'Ext.app.GridPortlet',
            'Ext.app.ChartPortlet'
        ]);

        Ext.onReady(function(){
            Ext.create('Ext.app.Portal');
        });
    </script>

-->


</head>
<body>

</body>
</html>